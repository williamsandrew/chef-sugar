{"name":"Chef Sugar","tagline":"Chef Sugar is a Gem & Chef Recipe that includes series of helpful sugar of the Chef core and other resources to make a cleaner, more lean recipd DSL, enforce DRY principles, and make writing Chef recipes an awesome experience!","body":"Chef::Sugar\r\n================\r\n[![Gem Version](http://img.shields.io/gem/v/chef-sugar.svg)][gem]\r\n[![Build Status](http://img.shields.io/travis/sethvargo/chef-sugar.svg)][travis]\r\n[![Dependency Status](http://img.shields.io/gemnasium/sethvargo/chef-sugar.svg)][gemnasium]\r\n[![Code Climate](http://img.shields.io/codeclimate/github/sethvargo/chef-sugar.svg)][codeclimate]\r\n[![Gittip](http://img.shields.io/gittip/sethvargo.svg)][gittip]\r\n\r\n[gem]: https://rubygems.org/gems/chef-sugar\r\n[travis]: http://travis-ci.org/sethvargo/chef-suguar\r\n[gemnasium]: https://gemnasium.com/sethvargo/chef-sugar\r\n[codeclimate]: https://codeclimate.com/github/sethvargo/chef-sugar\r\n[gittip]: https://www.gittip.com/sethvargo\r\n\r\nChef Sugar is a Gem & Chef Recipe that includes series of helpful sugar of the Chef core and other resources to make a cleaner, more lean recipe DSL, enforce DRY principles, and make writing Chef recipes an awesome experience!\r\n\r\n\r\nInstallation\r\n------------\r\nIf you want to develop/hack on chef-sugar, please see the Contributing.md.\r\n\r\nIf you are using Berkshelf, add `chef-sugar` to your `Berksfile`:\r\n\r\n```ruby\r\ncookbook 'chef-sugar'\r\n```\r\n\r\nOtherwise, you can use `knife` or download the tarball directly from the community site:\r\n\r\n```ruby\r\nknife cookbook site install chef-sugar\r\n```\r\n\r\n\r\nUsage\r\n-----\r\nIn order to use Chef Sugar in your Chef Recipes, you'll first need to include it:\r\n\r\n```ruby\r\ninclude_recipe 'chef-sugar::default'\r\n```\r\n\r\nAlternatively you can put it in a base role or recipe and it will be included subsequently.\r\n\r\nRequiring the Chef Sugar Gem will automatically extend the Recipe DSL, `Chef::Resource`, and `Chef::Provider` with helpful convenience methods.\r\n\r\n### Module Method\r\nIf you are working outside of the Recipe DSL, you can use the module methods instead of the Recipe DSL. In general, the module methods have the same name as their Recipe-DSL counterparts, but require the node object as a parameter. For example:\r\n\r\nIn a Recipe:\r\n\r\n```ruby\r\n# cookbook/recipes/default.rb\r\ndo_something if windows?\r\n```\r\n\r\nIn a Library as a singleton:\r\n\r\n```ruby\r\n# cookbook/libraries/default.rb\r\ndef only_on_windows(&block)\r\n  yield if Chef::Sugar::PlatformFamily.windows?(@node)\r\nend\r\n```\r\n\r\nIn a Library as a Mixin:\r\n\r\n```ruby\r\n# cookbook/libraries/default.rb\r\ninclude Chef::Sugar::PlatformFamily\r\n\r\ndef only_on_windows(&block)\r\n  yield if windows?(@node)\r\nend\r\n```\r\n\r\n\r\nAPI\r\n---\r\n**Note:** For the most extensive API documentation, please see the YARD documentation.\r\n\r\n### Architecture\r\n**Note:** Some of the architecture commands begin with an underscore (`_`) because Ruby does not permit methods to start with a numeric.\r\n\r\n- `_64_bit?`\r\n- `_32_bit?`\r\n\r\n#### Examples\r\n```ruby\r\nexecute 'build[my binary]' do\r\n  command '...'\r\n  not_if  { _64_bit? }\r\nend\r\n```\r\n\r\n### Cloud\r\n- `azure?`\r\n- `cloud?`\r\n- `ec2?`\r\n- `eucalyptus?`\r\n- `gce?`\r\n- `linode?`\r\n- `openstack?`\r\n- `cloudstack?`\r\n- `rackspace?`\r\n\r\n#### Examples\r\n```ruby\r\ntemplate '/tmp/config' do\r\n  variables(\r\n    # See also: best_ip_for\r\n    ipaddress: cloud? ? node['local_ipv4'] : node['public_ipv4']\r\n  )\r\nend\r\n```\r\n\r\n### Core Extensions\r\n**Note:** Core extensions are **not** included by default. You must require the `chef/sugar/core_extensions` module manually to gain access to these APIs:\r\n\r\n```ruby\r\nrequire 'chef/sugar/core_extensions'\r\n```\r\n\r\n- `String#satisfies?`\r\n- `String#satisfied_by?`\r\n- `Array#satisfied_by?`\r\n- `Object#blank?`\r\n\r\n#### Examples\r\n```ruby\r\n# Checking version constraints\r\n'1.0.0'.satisfies?('~> 1.0') #=> true\r\n'~> 1.0'.satisfied_by?('1.0') #=> true\r\n```\r\n\r\n```ruby\r\n# Check for an object's presence\r\n''.blank? #=> true\r\n['hello'].blank? #=> false\r\n```\r\n\r\n### Data Bag\r\n- `encrypted_data_bag_item` - a handy DSL method for loading encrypted data bag items the same way you load a regular data bag item; this requires `Chef::Config[:encrypted_data_bag_secret]` is set!\r\n- `encrypted_data_bag_item_for_environment` - find the data bag entry for the current node's Chef environment.\r\n\r\n#### Examples\r\n```ruby\r\nencrypted_data_bag_item('accounts', 'hipchat')\r\n```\r\n\r\n```ruby\r\nencrypted_data_bag_item_for_environment('accounts', 'github')\r\n```\r\n\r\n### Attributes\r\nChef Sugar adds more Chef-like DSL to attribute definitions. Instead of using the Ruby hash syntax, you can define attributes using nested namespaces. This DSL may be more friendly to non-Ruby developers. It can safely be mixed-and-matched with the standard syntax.\r\n\r\n```ruby\r\n# This is functionally the same as default['apache2']['config']['root'] = '/var/www'\r\nnamespace 'apache2' do\r\n  namespace 'config' do\r\n    root '/var/www'\r\n  end\r\nend\r\n```\r\n\r\n```ruby\r\n# Specify multiple keys instead of nesting namespaces\r\nnamespace 'apache2', 'config' do\r\n  root '/var/www'\r\nend\r\n```\r\n\r\n```ruby\r\n# Specify different nested precedence levels\r\nnamespace 'apache2', precedence: normal do\r\n  namespace 'config', precedence: override do\r\n    root '/var/www' #=> override['apache2']['config']['root'] = '/var/www'\r\n  end\r\nend\r\n```\r\n\r\n### Constraints\r\n- `constraints` - create a new constraint (or requirement) that can be used to test version validations.\r\n- `chef_version` - (DSL only) a wrapper for `version(Chef::VERSION)`\r\n- `version` - create a new version that can be used to test constraint validation.\r\n\r\n#### Examples\r\n```ruby\r\n# Check if a version is satisfied by a constraint\r\nversion('1.2.3').satisfies?('~> 1.2.0')\r\n```\r\n\r\n```ruby\r\n# Check if a constraint is satisfied by a version\r\nconstraint('~> 1.2.0').satisfied_by?('1.2.3')\r\n```\r\n\r\n```ruby\r\n# Support multiple constraints\r\nversion('1.2.3').satisfies?('> 1.2', '< 2.0')\r\nconstraint('> 1.2', '< 2.0').satisfied_by?('1.2.3')\r\n```\r\n\r\n```ruby\r\n# Only perform an operation if Chef is at a certain version\r\npackage 'apache2' do\r\n  not_if { chef_version.satisfies?('~> 11.0') } # Ignore Chef 11\r\nend\r\n```\r\n\r\n### Kernel\r\n- `require_chef_gem` - \"safely\" require a gem. Loading a gem with Chef is sometimes difficult and confusing. The errors that Chef produces are also sometimes not very intuitive. In the event you require a gem to exist on the system, you can use `require_chef_gem`, which will attempt to require the gem and then produce helpful output if the gem is not installed:\r\n\r\n        Chef could not load the gem `#{name}'! You may need to install the gem\r\n        manually with `gem install #{name}', or include a recipe before you can\r\n        use this resource. Please consult the documentation for this cookbook\r\n        for proper usage.\r\n\r\n#### Examples\r\n```ruby\r\n# LWRP\r\nrequire_chef_gem 'pry'\r\n```\r\n\r\n```ruby\r\nclass Chef\r\n  class Provider\r\n    class MyProvider > Provider\r\n      require_chef_gem 'pry'\r\n    end\r\n  end\r\nend\r\n```\r\n\r\n### IP\r\n- `best_ip_for` - determine the best IP address for the given \"other\" node, preferring local IP addresses over public ones.\r\n\r\n#### Examples\r\n```ruby\r\nredis = search('node', 'role:redis').first\r\n\r\ntemplate '/tmp/config' do\r\n  variables(\r\n    ipaddress: best_ip_for(redis)\r\n  )\r\nend\r\n```\r\n\r\n### Node\r\n- `deep_fetch` - safely fetch a nested attribute.\r\n- `deep_fetch!` - fetch a nested attribute, raising a more semantic error if the key does not exist.\r\n- `in?` - determine if the node is in the given Chef environment.\r\n\r\n#### Examples\r\n```ruby\r\ncredentials = if in?('production')\r\n                Chef::EncryptedDataBag.new('...')\r\n              else\r\n                data_bag('...')\r\n              end\r\n```\r\n\r\n```ruby\r\nnode.deep_fetch('apache2', 'config', 'root') => node['apache2']['config']['root']\r\n```\r\n\r\n### Platform\r\n- `amazon_linux?`\r\n- `centos?`\r\n- `linux_mint?`\r\n- `oracle_linux?`\r\n- `redhat_enterprise_linux?`\r\n- `scientific_linux?`\r\n- `ubuntu?`\r\n\r\nThere are also a series of dynamically defined matchers that map named operating system release versions and comparison operators in the form \"#{platform}\\_#{operator}\\_#{name}?\". For example:\r\n\r\n- `debian_after_squeeze?`\r\n- `linuxmint_after_or_at_olivia?`\r\n- `mac_os_x_lion?`\r\n- `ubuntu_before_lucid?`\r\n- `ubuntu_before_or_at_maverick?`\r\n\r\nTo get a full list, run the following in IRB:\r\n\r\n```ruby\r\nrequire 'chef/sugar'\r\nputs Chef::Sugar::Platform.instance_methods\r\n```\r\n\r\n#### Examples\r\n```ruby\r\nif ubuntu?\r\n  execute 'apt-get update'\r\nend\r\n```\r\n\r\n### Platform Family\r\n- `arch_linux?`\r\n- `debian?`\r\n- `fedora?`\r\n- `freebsd?`\r\n- `gentoo?`\r\n- `linux?`\r\n- `mac_os_x?`\r\n- `openbsd?`\r\n- `rhel?`\r\n- `slackware?`\r\n- `suse?`\r\n- `windows?`\r\n\r\n#### Examples\r\n```ruby\r\nnode['attribute'] = if windows?\r\n                      'C:\\Foo\\BarDrive'\r\n                    else\r\n                      '/foo/bar_drive'\r\n                    end\r\n```\r\n\r\n### Ruby\r\n**Note:** The applies to the Ruby found at `node['languages']['ruby']`.\r\n\r\n- `ruby_20?`\r\n- `ruby_19?`\r\n\r\n#### Examples\r\n```ruby\r\nlog 'This has been known to fail on Ruby 2.0' if ruby_20?\r\n```\r\n\r\n### Run Context\r\n- `includes_recipe?` - determines if the current run context includes the recipe\r\n\r\n```ruby\r\nif includes_recipe?('apache2::default')\r\n  apache_module 'my_module' do\r\n    # ...\r\n  end\r\nend\r\n```\r\n\r\n### Shell\r\n- `which`\r\n- `dev_null`\r\n- `installed?`\r\n- `installed_at_version?`\r\n- `version_for`\r\n\r\n#### Examples\r\n```ruby\r\nlog \"Using `mongo` at `#{which('mongo')}`\"\r\n\r\nif installed?('apt')\r\n  execute 'apt-get update'\r\nend\r\n\r\nexecute 'install[thing]' do\r\n  command \"... 2>&1 #{dev_null}\"\r\n  not_if  { installed_at_version?('thing', node['thing']['version']) }\r\nend\r\n\r\nlog \"Skipping git install, version is at #{version_for('mongo', '-v')}\"\r\n```\r\n\r\n### Vagrant\r\n- `vagrant?`\r\n\r\n#### Examples\r\n```ruby\r\nhttp_request 'http://...' do\r\n  not_if { vagrant? }\r\nend\r\n```\r\n\r\n### Filters\r\n- `compile_time` - accepts a block of resources to run at compile time\r\n- `before` - insert resource in the collection before the given resource\r\n- `after` - insert resource in the collection after the given resource\r\n\r\n#### Examples\r\n```ruby\r\ncompile_time do\r\n  package 'apache2'\r\nend\r\n\r\n# This is equivalent to\r\npackage 'apache2' do\r\n  action :nothing\r\nend.run_action(:install)\r\n```\r\n\r\n```ruby\r\nbefore 'service[apache2]' do\r\n  log 'I am before the apache 2 service fires!'\r\nend\r\n```\r\n\r\n```ruby\r\nafter 'service[apache2]' do\r\n  log 'I am after the apache 2 service fires!'\r\nend\r\n```\r\n\r\n\r\nLicense & Authors\r\n-----------------\r\n- Author: Seth Vargo (sethvargo@gmail.com)\r\n\r\n```text\r\nCopyright 2013-2014 Seth Vargo\r\n\r\nLicensed under the Apache License, Version 2.0 (the \"License\");\r\nyou may not use this file except in compliance with the License.\r\nYou may obtain a copy of the License at\r\n\r\n    http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nUnless required by applicable law or agreed to in writing, software\r\ndistributed under the License is distributed on an \"AS IS\" BASIS,\r\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\nSee the License for the specific language governing permissions and\r\nlimitations under the License.\r\n```\r\n","google":"UA-12012976-11","note":"Don't delete this file! It's used internally to help with page regeneration."}